{% macro getImagePath(image, defaultPath, uploadDir) %}
    {% if image starts with 'http' %}
        {{ image }}
    {% elseif image %}
        {{ asset(uploadDir ~ '/' ~ image) }}
    {% else %}
        {{ asset(defaultPath) }}
    {% endif %}
{% endmacro %}

{% macro init(user) %}
    {% set baseDir = 'uploads/backdrop' %}
    {% set defaultBackdropPath = baseDir ~ '/default-backdrop.jpg' %}
    {% set uploadDir = baseDir ~ '/custom' %}
    {% set backdropPath = _self.getImagePath(user.preferences ? user.preferences.backdrop : null, defaultBackdropPath, uploadDir) %}
    style="background-image: url('{{ backdropPath }}');"
{% endmacro %}

{% macro splashscreen(settings) %}
    {% set baseDir = 'uploads/splashscreen' %}
    {% set defaultSplashscreenPath = baseDir ~ '/default-splashscreen.jpg' %}
    {% set uploadDir = baseDir ~ '/custom' %}
    {% set splashscreenPath = _self.getImagePath(settings ? settings.splashscreen : null, defaultSplashscreenPath, uploadDir) %}
    style="background-image: url('{{ splashscreenPath }}');"
{% endmacro %}
