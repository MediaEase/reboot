{% extends 'pages/users/profile/base.html.twig' %}

{% block title %}My Profile - {{ app.request.server.get('SITE_NAME') }}
{% endblock %}

{% block body %}
    {% import '_macros/form/buttons.html.twig' as form_macros %}
    {% import '_macros/profile.html.twig' as profile %}
    <div class="max-w-[98%] md:mx-auto md:px-auto lg:pl-[5rem]">
        <div class="xl:pt-[.3615rem] pt-[6.5rem] relative">
            {{ profile.banner(user) }}
            <div class="absolute left-1/2 transform -translate-x-1/2 z-20 text-4xl text-gray-700 dark:text-gray-200 font-semibold flex items-center justify-center space-x-2">
                <p class="leading-tight">{{ user.username }}</p>
                {% if user.isVerified %}
                    <div class="relative group">
                        <span class="h-4 w-4 bg-green-500 rounded-full flex items-center justify-center">
                            <svg class="w-3 h-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </span>
                        <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-max p-2 text-xs text-white bg-black rounded opacity-0 group-hover:opacity-100 transition-opacity">
                            Account verified
                        </div>
                    </div>
                {% else %}
                    <div class="relative group">
                        <span class="h-4 w-4 bg-red-500 rounded-full flex items-center justify-center">
                            <svg class="w-3 h-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </span>
                        <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-max p-2 text-xs text-white bg-black rounded opacity-0 group-hover:opacity-100 transition-opacity">
                            Account not verified
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="xl:pt-[2.3615rem] pt-[6.5rem] text-gray-600 dark:text-slate-200">
            <div class="flex flex-wrap -mx-3">
                <div class="w-full lg:w-1/4 px-3 mb-6">
                    {% include "pages/users/profile/components/account_informations.html.twig" with {'user' : user } %}
                </div>
                <div class="w-full lg:w-3/4 px-3 text-gray-600 dark:text-slate-200">
                    <div class="p-4 bg-gray-200/55 dark:bg-gray-900/85 rounded-lg shadow-md">
                        <div class="w-full flex px-4 pt-2 xl:p-0">
                            {# User Identity #}
                            <div class="w-1/2 pr-4 flex flex-col justify-between">
                                {% include "pages/users/profile/forms/_userImageForm.html.twig" with {'user': user} %}
                            </div>
                            {# Password  #}
                            <div class="w-1/2 flex flex-col justify-between -pb-4">
                                {% include "pages/users/profile/forms/_changePassword.html.twig" %}
                            </div>
                        </div>
                        <hr class="my-4 border-t-1 border-gray-300 dark:border-slate-300" />
                        <div class="w-full flex px-4 pt-2 xl:p-0">
                            <div class="w-6/12 pr-4 flex flex-col justify-between">
                                <div class="w-11/12">
                                    {# Mounts #}
                                    {% include "pages/users/profile/forms/_mountPaths.html.twig" with {'user': user} %}
                                </div>
                            </div>
                            <div class="w-6/12 flex flex-col justify-between">
                                {# User Settings #}
                                {% include "pages/users/profile/forms/_userSettingsForm.html.twig" %}
                            </div>
                        </div>
                        <hr class="my-4 border-t-1 border-gray-300 dark:border-slate-300" />
                        <div class="flex justify-end">
                            <a href="{{ path('app_users_profile_export') }}" class="flex text-blue-500 hover:text-blue-700 underline">{{ ux_icon('heroicons:archive-box-arrow-down', {class: 'w-7 h-7 pr-2 pb-1 fill-blue-500 font-bold dark:fill-blue-700'}) }} Export Data</a>
                        </div>
                    </div>
                </div>
            </div>
            {# addMount Modale #}
            <div data-te-modal-init class="fixed left-0 top-0 z-[1055] hidden h-dvh w-full overflow-y-auto overflow-x-hidden outline-none" id="addMountModal" tabindex="-1" aria-labelledby="addMountModalLabel" aria-modal="true" role="dialog">
                <div data-te-modal-dialog-ref class="pointer-events-none relative flex min-h-[calc(100%-0.5rem)] w-1/2 mx-auto translate-y-[-50px] items-center opacity-0 transition-all duration-300 ease-in-out">
                    {% include "pages/users/profile/modal/modale.html.twig" %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
