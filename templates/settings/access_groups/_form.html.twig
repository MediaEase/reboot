{{ form_start(form) }}
    {% import '_macros/form_macros.html.twig' as form_macros %}
    {% if action == 'edit' %}
        {{ form_widget(form) }}
    {% else %}
        {% for field in form %}
            {% if field.vars.name not in ['_token', 'save', 'stores'] %}
                <div class="w-full px-3 xl:mb-6 md:mb-0 pt-2 xl:p-0">
                    {% set fieldName = field.vars.name %}
                    {{ form_macros.label_with_icon(form, fieldName, 'newgroup') }}
                    {{ form_widget(field, {'attr': {'class': 'form-widget'}}) }}
                    {{ form_macros.error_with_icon(form, fieldName) }}
                </div>
            {% elseif field.vars.name == 'stores' %}
                <div class="w-full px-3 xl:mb-6 md:mb-0 pt-2 xl:p-0">
                    {% set fieldName = field.vars.name %}
                    {{ form_macros.label_with_icon(form, fieldName, 'newgroup') }}
                    {{ form_widget(field, {'attr': {'class': 'tomselect'}}) }}
                    {{ form_macros.error_with_icon(form, fieldName) }}
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
    <div class="flex justify-between pt-3 mt-4 mb-2 xl:mx-2 xl:p-3">
        <a href="{{ path('app_settings_access_groups_index') }}" class="flex items-center text-red-400 underline decoration-red-400 hover:text-red-600 hover:decoration-red-600">
            {{ ux_icon('fluent:arrow-circle-left-20-filled', {class: 'h-5 w-5 mr-2 fill-red-400 hover:fill-red-600 decoration-red-400 hover:decoration-red-600'}) }}Back to list
        </a>
        {{ form_macros.save_button(form) }}
    </div>
{{ form_row(form._token) }}
{{ form_end(form, {'render_rest': false}) }}
